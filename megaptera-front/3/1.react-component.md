# React Component

## :whale2: 키워드

* Mockup
* Json
* API
* REST API
* GraphQL
* DSL

## Mockup이란?

최종 결과물은 아니지만 css나 무언가로 꾸며도 현재 상태에서 크게 바뀌진 않는 결과물이다.

## JSON은 왜 필요한가?

프론트엔드와 백엔드는 데이터를 교환해야 한다. 하지만 백엔드에서 뭔가를 만들면 그대로 보낼 수 없다. 만약, HTTP를 사용하면 문자열로 보낼 수 있다. 하지만 우리는 문자열이 아니라 객체로 쓰고 싶다. 그래서 등장한게 JSON이다.

JSON은 기본적으로 문자열이지만 stringify, parse를 이용해서 문자열과 객체의 상호 전환이 가능하다.

## API란?

API는 서버와 통신하기 위해 만들어진 인터페이스이다. 프론트와 백엔드의 통신은 API를 이용하여 이루어진다.

백엔드에서 JSON 형태의 데이터를 돌려주는 API를 제공한다고 가정한다면, 대부분 REST API 또는 GraphQL을 쓴다.

## REST API란 무엇인가?

fetch API을 이용해서 HTTP methods(GET, POST, PUT/PATCH, DELETE)로 CRUD를 할 수 있다. 이는 Resoucrce 중심으로 조작한다.

REST는 매번 새로운 URL을 생성하는 방식이다.

REST API는 여러 개의 고유한 URL을 활용하여 작동한다. 그리고 이는 각기 다른 데이터를 제공한다.

> 생활코딩 URL를 보니 REST APT를 쓰나보다. `https://www.opentutorials.org/course/5063`

REST API는 웹 사이트를 주는 것이 아니다. URL에 접속하면 브라우저가 데이터를 요청해서 JSON 형태의 데이터를 받는다.

## GraphQL이란 무엇인가?

그래프 자료구조 이용한다. 쿼리에서 얻고자 하는 것을 지정한다.

Query(Read),
Mutation(Command: Create, Update, Delete),
Subscription(Event)

## GraphQL은 왜 등장했는가?

REST API의 단점(Over Fetching, Under Fetching)을 극복하고자 등장했다.

### REST API의 단점: Over Fetching

필요한 데이터보다 더 많은 데이터를 가져오는 것이 단점이다.

> 실제로 영화 API를 가지고 웹 사이트를 만들었는데 제목, 평점, 줄거리를 제외한 데이터는 필요 없었다. Over Fetching을 겪었고 필요 없는 데이터 때문에 로딩 시간도 길어졌다.

GraphQL은 필요한 정보만 특정하여 가져올 수 있다. QL, 쿼리 언어이니까. 가져올 데이터가 크지 않으면 로딩 시간을 줄일 수 있다.

다음과 같이 작성한다.

```bash
{
    upcoming{
        title
    }
}
```

### REST API의 단점: Under Fetching

반대로 필요한 데이터보다 적은 양의 데이터를 가져오는 것도 단점이다.

> 영화 API를 가지고 개봉 예정 영화와 상영 중인 영화의 데이터를 가져오고 싶은데, URL이 다르다면 2개의 URL에 요청을 해야 한다. 이는 또 로딩 시간 증가로 이어진다.

GraphQL은 1개의 쿼리에 여러 개의 정보를 한방에 요청할 수 있다.

```bash
{
    upcoming{
        title
    }
    nowplaying{
        title
        popularity
    }
}
```

## REST API vs GraphQL

> GraphQL의 등장 배경을 보면 REST API보다 빠르고, Fetch 필요없이 Query로 데이터를 불러올 수 있어서 만능 같아보인다. 하지만 데이터를 추가한다면 REST API는 그냥 다 가져오는데, GraphQL은 쿼리를 다시 작성해야 하는 문제가 있을 것 같다. 특정 필드만 가져오는 상황이면 GraphQL 쓰고 그 외의 상황이면 장단점을 고려해서 선택해야겠다.

- 선언형 프로그래밍
- 명령형 프로그래밍
- SRP(단일 책임 원칙)
- Atomic Design
- React component 와 props

용어의 정의(정확한 정의)
역사 또는 왜 필요한가/왜 생겼는가
특징(또는 장/단점)
실제 사용 사례나 경험
             
프론트는 받은 JSON 데이터를 사용자가 볼 수 있도록 UI를 구성한다. 리액트는 선언형으로 UI를 구성할 수 있다.

리액트가 선언형인 이유는 HTML과 유사한 모양의 DSL을 사용하기 때문이다.

DSL은 특정 도메인을 해결하도록 설계된 언어이다. 특정 도메인은 특정 전문 지식 또는 응용 분야를 나타낸다. (웹 개발, 의료, 금융 등)

예를 들자면, HTML은 웹 페이지 구조와 내용을 설명하는 데 사용되는 DSL이다.

리액트도 DSL이다. 웹 애플이케이션에 대한 UI를 설명하는 특정 방법을 제공하기 때문이다.

> 저번주에 배웠던 것 처럼 우리는 원하는 UI 동작을 달성하기 위해 DOM을 직접 조작하지 않는다. React.createElement를 이용해 DOM을 생성하고 조작된다.

## 명령형 프로그래밍 vs 선언형 프로그래밍

명령형 프로그래밍은 문제를 단계 별로 해결하는 방법을 알
예를 들어, C, Java, Pythond이 이에 해당한다.

선언형 프로그래밍은
예를 들어, HTML, SQL, CSS가 이에 해당한다.

## 리액트의 강력한 특징

1. 선언형이다.
2. 컴포넌트 기반이다.

## 컴포넌트 계층 구조

간단한 컴포넌트들을 모아서 복잡한 UI를 만들 수 있다.

> 복잡한 컴포넌트를 만들고 있다면 리액트의 장점을 못 살리고 있었구나

## Thinking in React

Start with the date & mockup

### Step 1: 컴포넌트 계층 구조로 UI를 쪼개라

컴포넌트는 부품과 같은 것이다. 컴포넌트 계층 구조는 DOM 트리처럼 컴포넌트 트리이다.

컴포넌트 하나에 모든 것을 작성하면 컴포넌트가 비대해지고, 다양한 UI가 하나의 컴포넌트에 존재하게 된다.

리액트의 강력한 특징 중 하나는 컴포넌트 기반이라는 것이다. 단순한 컴포넌트로 복잡한 UI를 만들 수 있다.

### 단순한 컴포넌트의 기준은?

> 리액트 뿐만 아니라 바닐라 자바스크립트로도 무언가를 만들 때 함수가 길어지면 쪼개야 했다. 하지만 쪼개는 기준을 잡지 못해 마음대로 쪼개었다.
> SRP 기준을 적용했다면 구분하는게 더 쉬웠을 것이다.

#### 1. SRP [단일 책임 원칙]

객체 지향 프로그래밍의 5가지 원칙 중 1가지이다.

컴포넌트가 너무 커지고 있다면, 잘못하고 있는 것이다. 쪼개야 한다. 하나의 컴포넌트가 변경되는 이유는 단 하나여야 한다. (= 모든 컴포넌트는 하나의 책임만 가지고 캡슐화 해야 한다.)

단, 컴포넌트에 html 코드가 많아질 수도 있고 자바스크립트 코드가 많아질 수도 있는데, 자바스크립트 코드가 많아진다면 SAP가 아닌 다른 방법을 알아보자.

(컴포넌트는 view만 담당한다고?)

> 우선은 너무 지엽적인 거에 집중하기보단
> SRP가 필요한 이유를 최대한 느껴보세요.
> 홀맨 컴포넌트가 어느 수준까지 가벼워 질 수 있는지와
> 홀맨 그렇게 했을 때 얻어지는 장점
> 홀맨 와 나도 꼭 지켜야겠구나!
> 홀맨 이런 느낌을 얻어가는게 훨씬 좋습니다

#### 2. CSS

이미 알고 있는 기준을 재활용한다. 이게 무슨 말이냐면, 우리는 CSS를 작성할 때 다음과 같이 컴포넌트를 분리하고 있다.

```html
<div class="product">
    <div class="thumbnail">
    <div class="price">
</div>
```

html 코드가 많아지는 경우에는 class 이름을 활용할 수 있다.

#### 3. Design's Layer

디자인을 만들 때부터 레이어라는 개념으로 나누어 놓는다. 체계적인 레이어는 트리 형태로 되어 있다. 이를 컴포넌트로 활용할 수 있다.

#### 4. Imformation Architecture

API에서 받아오는 데이터(JSON Schema) 기준으로 컴포넌트 구조를 JSON이 체계적으로 되어 있다면 이 구조를 이용한다. 이것에 맞춰 컴포넌트를 나누다보면 자연스레 SRP를 달성하게 되는 흐름인된다.

> 아샬님은 이 방법을 가장 많이 쓰는데, JSON 구조가 체계적이지 않다면 백엔드에서 고치거나 받은 JSON을 고쳐서 사용한다고 하신다.

#### 컴포넌트 장단점

단점은, 작은 컴포넌트를 이용해서 만들 수 있는 조합의 가지 수가 많아서 폭발적으로 양이 늘어나면 관리가 힘들다.

반대로 장점은, 비슷한 무언가를 만들 때 하나의 부품만 바꿔도 원하는 것을 만들 수 있다.

#### Atomic Design

원소처럼 잘 조합을 해서 원하는 모든 것을 만들자는 개념적인 아이디어이다.

### Step 2: 리액트로 정적인 버전을 만들어라
