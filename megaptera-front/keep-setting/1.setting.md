# 개발 환경 세팅

## :whale2: 키워드

* Node.js 개발 환경 세팅
  * 노드 버전 확인
  * 노드 설치
  * 프로젝트 폴더 생성
  * npm 패키지 만들기
  * .gitignore 파일 생성
* TypeScript + React + Jest + Parcel 개발 환경 세팅
  * 타입스크립트 설치
  * 타입스크립트 설정 초기화
  * tsconfig.json 파일 수정
  * eslint 설치
  * eslint.js 생성
  * .eslintignore 생성
  * React 설치
  * Jest 설치
  * jest.config.js 파일 작성
  * Parcel 설치
  * package.json에서 script에 추가
  * index.html 생성
  * typeScript 파일 생성 및 index.html 수정
  * main.tsx
  * eslint 실행
  * .eslintrc.js 에러 해결

## Node.js 개발 환경 세팅

### 노드 버전 확인

```shell
node -v
```

### 노드 설치

`LTS[Long term Support]`는 장기적으로 지원하는 버전으로 홀수입니다. 최신 버전으로 다운 받습니다.

fnm을 이용하면 더 빠른 실행을 할 수 있습니다.

```shell
fnm install --lts
fnm list
```

## TypeScript + React + Jest + Parcel 개발 환경 세팅

### 프로젝트 폴더 생성

```shell
mkdir my-app
cd my-app
code .
```

### npm 패키지 만들기

`-y`는 묻지도 따지지도 않고 Yes라는 뜻입니다.

```shell
npm init -y
```

생성된 `package.json`은 name, version, description, author 등 수정 가능합니다.

### .gitignore 파일 생성

최소 아래는 추가되야 합니다.

```
/node_modules/ 
/dist/
```

github에서 제공해주는 `.gitignore`파일을 복사하는 걸 추천 드립니다.

[.gitignore](https://github.com/github/gitignore/blob/main/Node.gitignore)

### 타입스크립트 설치

typeScript를 설치합니다.

```shell
npm i -D typescript

혹은

npm install --save-dev typescript
```

`package.json`에는 dependencies와 devDependencies가 있습니다.

`dependencies`는 프로그램에서 직접 쓰는 것입니다. 예를 들어, React가 있습니다.

`devDependencies`는 개발 환경에서 쓰는 것으로 도구, 툴입니다. 예를 들어, TypeScript가 있습니다.

서버에 배포할 때 `devDependencies`를 빼고 설치할 수 있어서, 배포 크기를 줄일 수 있습니다.

### 타입스크립트 설정 초기화

npm으로 install해서 typescirpt가 node_modules에 추가 되었습니다. 이를 npx로 실행할 수 있습니다.

npx로 초기화 작업을 합니다. tsx는 타입스크립트 컴파일러입니다.

```shell
npx tsc --init 

혹은

./node_modules/.bin/tsc --init
```

npx는 npm으로 설치하지 않아도 npm 패키지를 관리하는 곳에서 받아서 실행할 수 있다.
그곳이 macOS는 ~/.npm/_npx 에 존재합니다.

### tsconfig.json 파일 수정

`"jsx": "preserve"`의 주석을 해제합니다.

이는 `.tsx` 파일을 사용하게 해주고, import React를 하지 않아도 사용할 수 있게 해줍니다.

### eslint 설치

eslint는 도구입니다.

```shell
npm i -D eslint
npx eslint --init
```

다음과 같이 상황에 맞게 질문에 대답합니다.

```
설치할까요? y
Eslint 어떤 거에 사용할까요? 모두
자바스크립트 모듈 어떤거 사용할까요? JavaScript (import/export)
프레임워크는 어떤 거 쓸까요? react
타입스크립트 사용하나요? y
Browser, Node? Browser
스타일 가이드를 따르세요? 아니면 매번 물어볼까요? 전자
스탠다드를 따르세요? xo를 따르세요? xo
설정파일 어떻게 잡으시겠어요? js
추가 설치해도 되나요? y
패키지 매니저 뭐 쓸까요? npm (기본)
```

### eslint.js 생성

`env`안에 `jest: true`를 추가합니다.

### .eslintignore 생성

eslint를 실행할 때 여긴 뺀다는 뜻입니다. .gitignore과 동일하게 작성합니다.

[.gitignore](https://github.com/github/gitignore/blob/main/Node.gitignore)

### React 설치

```shell
npm i react react-dom
```

### Type React

```shell
npm i -D @types/react @types/react-dom
```

### Jest 설치

jest는 테스트 도구입니다.

```shell
npm i -D jest 어쩌고
```

### jest.config.js 파일 작성

jes와 swc를 사용하기 위한 목적입니다. 

jest가 기본적으로 타입스크립트와 swc를 안 씁니다. 타입스크립트는 변환하지 않으면 실행 안되기 때문에 이걸로 잡아줍니다.

[jest.config.js](https://github.com/ahastudio/CodingLife/blob/main/20220726/react/jest.config.js
)

```javascript
  '@testing-library/jest-dom/extend-expect', // jest-dom은 위에서 설치했습니다.
    './jest.setup', // 이 부분은 삭제합니다.
```

### Parcel 설치

parcel은 웹 서버를 띄우는 도구입니다.

```shell
npm i -D parcel
```

### package.json에서 script에 추가

```json
  "scripts": {
    "start": "parcel --port 8080",
    "build": "parcel build",
    "check": "tsc --noEmit",
    "lint": "eslint --fix --ext .js,.jsx,.ts,.tsx .",
    "test": "jest",
    "coverage": "jest --coverage --coverage-reporters html",
    "watch:test": "jest --watchAll"
  },
```

### index.html 생성

아래와 같이 파일을 만듭니다.

```shell
touch index.html
```

script를 불러오는 부분을 추가합니다.

```html
<script type="module" src=""></script>
```

### package.json 수정

package.json에서 source로 수정합니다.

```json
"source : "index.html"
```

### typeScript 파일 생성 및 index.html 수정

폴더와 타입 스크립트 파일을 생성합니다.

```shell
mkdir src
touch src/main.tsx
```

html 파일에 script를 추가합니다.

```html
<script type="module" src="src/main.tsx"></script>
```

### main.tsx

```typescript
import { ReactDOM } from "react-dom/client";

const element = document.getElementById('root');

if(!element) return;

const root = ReactDOM.createRoot(element);
root.reander();
```

### eslint 실행

현재 폴더와 그 아래까지 고칩니다.

```shell
npx eslint --fix .

or

npx run lint
```

### .eslintrc.js 에러 해결  

extends에 아래 내용을 추가합니다.

```javascript
extends: [
    'plugin:react/jsx-runtime',
]
```
