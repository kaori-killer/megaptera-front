# ê°œë°œí•˜ê¸° ì „ ì¤€ë¹„

## ğŸ‹ ìš©ì–´

ìš©ì–´ë¥¼ ì‚¬ìš©í•  ë•Œ í˜¼ì„ ì„ ë§‰ê¸° ìœ„í•´ì„œ ë¯¸ë¦¬ ì •ì˜í•´ë‘ê³  ì‹œì‘í•œë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, Productë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ìš©ì–´ëŠ” `êµ¿ì¦ˆ`, `ì•„ì´í…œ`, `í”„ë¡œë•íŠ¸`, `ìƒí’ˆ` ë“± ë§ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” `ìƒí’ˆ`ìœ¼ë¡œ í‘œí˜„í•œë‹¤.

![ìš©ì–´ ì •ì˜](https://velog.velcdn.com/images/kaori-killer/post/72287790-6142-45f2-ac49-94fe898068da/image.png)

## ğŸ‹ ê¸°ëŠ¥

ì‚¬ìš©ìê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì„ ì •ë¦¬í•œë‹¤. ê·¸ë¦¬ê³  ë¹„ì§€ë‹ˆìŠ¤ ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ê¸°ëŠ¥ì„ ê°œë°œí•  ìˆœì„œë¥¼ ì •í•œë‹¤. (ë§¤ì¶œì´ ì¼ì–´ë‚  ìˆ˜ ìˆëŠ” ê°€ì¥ í•µì‹¬ì ì¸ ë¶€ë¶„ë¶€í„°)

1,2ë§Œ ìˆì–´ë„ ì¶©ë¶„íˆ ë§¤ì¶œì´ ì¼ì–´ë‚  ìˆ˜ ìˆë‹¤. ì˜ˆì „ì— ì“°ë˜ ë°°ë‹¬ ì±…ìë¥¼ ìƒê°í•´ë³´ë©´ ìƒí’ˆì— ëŒ€í•œ ì •ë³´ í™•ì¸ì€ í•„ìˆ˜ì˜€ì§€ë§Œ, ì¥ë°”êµ¬ë‹ˆì™€ ê²°ì œ ì‹œìŠ¤í…œ, ë¡œê·¸ì¸ ë“±ì´ ì—†ì–´ë„ ë§¤ì¶œì´ ì¼ì–´ë‚¬ë˜ ê²ƒì„ ë– ì˜¬ì´ë©´ ëœë‹¤. 

1. ìƒí’ˆ ëª©ë¡ í™•ì¸
2. ìƒí’ˆ ìƒì„¸ ì •ë³´ í™•ì¸
3. ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆ ë‹´ê¸°
4. ì£¼ë¬¸í•˜ê¸° â†’ ë°°ì†¡ì§€ ì…ë ¥, ê²°ì œ
5. ì£¼ë¬¸ ëª©ë¡ í™•ì¸
6. ì£¼ë¬¸ ìƒì„¸ í™•ì¸
7. ë¡œê·¸ì¸
8. íšŒì› ê°€ì…

## ğŸ‹ í™”ë©´

ì‚¬ìš©ìì—ê²Œ ì œê³µí•  í™”ë©´ êµ¬ì„±ì„ ì •ë¦¬í•œë‹¤.

1. í™ˆ í˜ì´ì§€ - `/`
2. ìƒí’ˆ ëª©ë¡ í˜ì´ì§€ - `/products`
3. ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ - `/products/{id}`
4. ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ - `/cart`
5. ì£¼ë¬¸ í˜ì´ì§€ - `/order`
6. ì£¼ë¬¸ ì™„ë£Œ í˜ì´ì§€ - `/order/complete`
7. ì£¼ë¬¸ ëª©ë¡ í˜ì´ì§€ - `/orders`
8. ì£¼ë¬¸ ìƒì„¸ í˜ì´ì§€ - `/orders/{id}`
9. ë¡œê·¸ì¸ í˜ì´ì§€ - `/login`
10. íšŒì› ê°€ì… í˜ì´ì§€ - `/signup`
11. íšŒì› ê°€ì… ì™„ë£Œ í˜ì´ì§€ - `/signup/complete`

## ğŸ‹ REST API

[ì˜¨ë¼ì¸ ì‡¼í•‘ëª° API](https://docs.google.com/document/d/1bGYl3IDoX53cNBbZHNlsRhPLZQ3Qiu-Jm3gpqyu_xI0/view)

ë°±ì—”ë“œì—ì„œ ì œê³µí•˜ëŠ” API ëª…ì„¸ì„œì´ë‹¤.

## ğŸ‹ ê°œë°œ í™˜ê²½ ì„¸íŒ…

- ë‚´ê°€ ë§Œë“  ê°œë°œ í™˜ê²½ ì„¸íŒ…
  - [ë¦¬ì•¡íŠ¸ í”„ë¡œì íŠ¸ ì„¸íŒ…í•˜ê¸°](https://velog.io/@kaori-killer/%EB%A6%AC%EC%95%A1%ED%8A%B8-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%84%B8%ED%8C%85%ED%95%98%EA%B8%B0)
  - [í…œí”Œë¦¿ ë¦¬í¬ì§€í† ë¦¬](https://github.com/kaori-killer/base-setting)

- ë©”ê°€í…Œë¼
  
  - [ê°œë°œ í™˜ê²½ ì„¸íŒ…í•˜ê¸° ê°€ì´ë“œ](https://github.com/megaptera-kr/textbook/tree/main/start-react-project)
  - [í”„ë¡œì íŠ¸ ë‹¤ìš´ë¡œë“œ](https://drive.google.com/file/d/1skJbKtcKRSFvXBdo6oPn1MeQP0QkUNzw/view)

### ì‚¬ìš©í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬

1. [React Router](https://github.com/remix-run/react-router)
2. [styled-components](https://github.com/styled-components/styled-components)
3. [styled-reset](https://github.com/zacanger/styled-reset)
4. [usehooks-ts](https://github.com/juliencrn/usehooks-ts)
5. [Axios](https://github.com/axios/axios): REST API ì‚¬ìš©ì„ ìœ„í•œ HTTP í´ë¼ì´ì–¸íŠ¸.
6. [tsyringe](https://github.com/microsoft/tsyringe)
7. [reflect-metadata](https://github.com/rbuckton/reflect-metadata)
8. [usestore-ts](https://github.com/seed2whale/usestore-ts)
9. [jest-dom](https://github.com/testing-library/jest-dom): React Testing Libraryì—ì„œ í™œìš©í•  ìˆ˜ ìˆëŠ” DOM í™•ì¸ìš© Matcher ëª¨ìŒ.
10. [MSW](https://github.com/mswjs/msw)

## ğŸ‹ E2E TEST

CodeceptJSë¡œ E2E í…ŒìŠ¤íŠ¸ë¥¼ ì¤€ë¹„í•˜ê³ , ì—¬ê¸° ìˆëŠ” ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ëª¨ë‘ í†µê³¼ì‹œí‚¤ëŠ” ê²Œ 9ì£¼ì°¨ ëª©í‘œì´ë‹¤.

```plaintext
1. ìƒí’ˆ ëª©ë¡
    1. ëª¨ë“  ìƒí’ˆ ë³´ê¸°
    2. íŠ¹ì • ì¹´í…Œê³ ë¦¬ì˜ ìƒí’ˆ ë³´ê¸°
2. ìƒí’ˆ ìƒì„¸
3. ì¥ë°”êµ¬ë‹ˆ
    1. ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆëŠ” ê²½ìš°
    2. ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆì„ ë‹´ì€ ê²½ìš°
4. â€¦
```

## ğŸ‹ Styles

styled-componentsë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ defaultThemeê³¼ GlobalStylesë¥¼ ì¤€ë¹„í•œë‹¤.

ê¸°ë³¸ ì½”ë“œëŠ” ê¸°ì¡´ê³¼ í¬ê²Œ ë‹¤ë¥´ì§€ ì•Šë‹¤. (8ì£¼ì°¨)

## ğŸ‹ Routes

React Routerë¡œ ì—¬ëŸ¬ í˜ì´ì§€ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ routesì™€ Layoutì„ ì¤€ë¹„í•œë‹¤.

ê¸°ë³¸ ì½”ë“œëŠ” ê¸°ì¡´ê³¼ í¬ê²Œ ë‹¤ë¥´ì§€ ì•Šë‹¤. (7ì£¼ì°¨)

## ğŸ‹ Test Helper

í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ styled-componentsì˜ Themeì€ Providerê°€ ì—†ì–´ì„œ ì£½ê³ , React Routerì˜ LinkëŠ” Providerê°€ ì—†ê¸° ë•Œë¬¸ì— Routerë¥¼ ë‚´ë ¤ì£¼ì§€ ì•Šì•„ì„œ ì£½ëŠ”ë‹¤.

ì´ë ‡ê²Œ ì‚¬ìš©í•  ë•Œ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡, React Testing Libraryì˜ renderë¥¼ í•œë²ˆ ê°ì‹¼ í…ŒìŠ¤íŠ¸ìš© í—¬í¼ í•¨ìˆ˜ë¥¼ ì¤€ë¹„í•œë‹¤.

```tsx
import { render as originalRender } from '@testing-library/react';

import React from 'react';

import { MemoryRouter } from 'react-router-dom';

import { ThemeProvider } from 'styled-components';

import defaultTheme from './styles/defaultTheme';

export function render(element: React.ReactElement) {
  return originalRender((
    <MemoryRouter initialEntries={['/']}>
      <ThemeProvider theme={defaultTheme}>
        {element}
      </ThemeProvider>
    </MemoryRouter>
  ));
}
```

## ğŸ‹ Types

MSWëŠ” REST APIì— ëŒ€í•´ì„œ ê°€ì§œë¡œ êµ¬í˜„í•˜ëŠ” í•˜ëŠ” ê±´ë° ê±°ê¸°ì„œ ì“¸ íƒ€ì…ì„ ì •ì˜í•œë‹¤. íƒ€ì…ì„ ì˜ ì •ì˜í•´ì„œ ì‚¬ìš©í•˜ë©´ Mock ë°ì´í„°ë¥¼ ë°±ì—”ë“œì˜ REST APIì™€ ë‹¤ë¥´ê²Œ ì‘ì„±í•˜ëŠ” ë¶ˆìƒì‚¬ë¥¼ ë§‰ì„ ìˆ˜ ìˆë‹¤.

ê¸°ë³¸ì ì¸ íƒ€ì…ì„ ì¤€ë¹„í•œë‹¤. íŠ¹ë³„í•œ ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´ `ë¯¸ë¦¬ ì •í•œ ìš©ì–´ì§‘` ê³¼ `REST API ìŠ¤í™` ì— ë§ì¶”ê²Œ ëœë‹¤.

ìš©ì–´ì§‘ì€ íŒ€ì´ ê³„ì†í•´ì„œ ê°€ì§€ê³  ê°€ëŠ” ê²ƒì´ë‹¤. ì˜ ì •ë¦¬ í•´ë†“ê³  ìˆ˜ì •í•´ ë‚˜ê°„ë‹¤. 

```tsx
export type Category = {
  id: string;
  name: string;
}

export type Image = {
  url: string;
}

export type ProductSummary = {
  id: string;
  category: Category;
  thumbnail: Image;
  name: string;
  price: number;
}

export type ProductOptionItem = {
  id: string;
  name: string;
};

export type ProductOption = {
  id: string;
  name: string;
  items: ProductOptionItem[];
};

export type ProductDetail = {
  id: string;
  category: Category;
  images: Image[];
  name: string;
  price: number;
  options: ProductOption[];
  description: string;
}

export type OrderOptionItem = {
  name: string;
};

export type OrderOption = {
  name: string;
  item: OrderOptionItem;
};

export type LineItem = {
  id: string;
  product: {
    id: string;
    name: string;
  };
  options: OrderOption[];
  unitPrice: number;
  quantity: number;
  totalPrice: number;
}

export type Cart = {
  lineItems: LineItem[];
  totalPrice: number;
}
```

## ğŸ‹ MSW ì„¸íŒ…

REST API ìŠ¤í™ì— ë§ì¶°ì„œ MSW í•¸ë“¤ëŸ¬ë¥¼ ì¤€ë¹„í•œë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ ì‚¬ìš©í•  Mock ë°ì´í„°ëŠ” fixtures í´ë”ì— ì •ì˜í•˜ì—¬ ì‚¬ìš©í•œë‹¤. Mock ë°ì´í„°ëŠ” REST API ëª…ì„¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ì‘ì„±í•œë‹¤.

```tsx
import { rest } from 'msw';

import { ProductSummary } from '../types';

import fixtures from '../../fixtures';

const BASE_URL = 'https://shop-demo-api-01.fly.dev';

const productSummaries: ProductSummary[] = fixtures.products
  .map((product) => ({
    id: product.id,
    category: product.category,
    thumbnail: { url: product.images[0].url },
    name: product.name,
    price: product.price,
  }));

const handlers = [
  rest.get(`${BASE_URL}/categories`, (req, res, ctx) => (
    res(ctx.json({ categories: fixtures.categories }))
  )),
  rest.get(`${BASE_URL}/products`, (req, res, ctx) => (
    res(ctx.json({ products: productSummaries }))
  )),
  rest.get(`${BASE_URL}/products/:id`, (req, res, ctx) => {
    const product = fixtures.products.find((i) => i.id === req.params.id);
    if (!product) {
      return res(ctx.status(404));
    }
    return res(ctx.json(product));
  }),
  rest.get(`${BASE_URL}/cart`, (req, res, ctx) => (
    res(ctx.json(fixtures.cart))
  )),
  rest.post(`${BASE_URL}/cart/line-items`, (req, res, ctx) => (
    res(ctx.status(201))
  )),
];

export default handlers;
```