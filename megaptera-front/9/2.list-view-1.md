# ìƒí’ˆ ëª©ë¡ ë³´ì—¬ì£¼ê¸°

ìƒí’ˆ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” í™”ë©´ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œ ì•„ë˜ ë‹¨ê³„ë¥¼ ê±°ì¹œë‹¤.

1. ìƒí’ˆ ëª©ë¡ ë°›ì•„ì˜¤ê¸°: `useFetchProducts` hook ë§Œë“¤ê¸°
2. ìƒí’ˆ ëª©ë¡ ë³´ì—¬ì£¼ê¸°: `Products` ì»´í¬ë„ŒíŠ¸ë¡œ êµ¬í˜„í•˜ê¸°
3. ì¡°í•©í•˜ê¸°: `ProductListPage` ì—ì„œ 1, 2 í•©ì¹˜ê¸°

>`Products` ì»´í¬ë„ŒíŠ¸ ì•ˆì—ì„œ `useFetchProducts` ì„ ì‹¤í–‰í•´ë„ ë˜ì§€ë§Œ, í˜ì´ì§€ë¥¼ ë“¤ì–´ê°”ì„ ë•Œ hookì´ ì‹¤í–‰ë˜ëŠ” ê²Œ ë§ê¸° ë•Œë¬¸ì— ê·¸ ì±…ì„ì€ `ProductListPage` ê°€ ê°–ê³ , ë³´ì—¬ì£¼ëŠ” ì±…ì„ì€ `Products` ê°–ë„ë¡ ì±…ì„ì„ ë‚˜ëˆ ì¤€ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ í…ŒìŠ¤íŠ¸ í•˜ê¸°ë„ ë” ì‰½ë‹¤.


## ğŸ‹ 3. ì¡°í•©í•˜ê¸°

`ProductListPage` ì—ì„œ `useFetchProducts` ë¡œ ìƒí’ˆ ëª©ë¡ì„ ë°›ì•„ì™”ë‹¤. ê·¸ë¦¬ê³  `Products`ì— ìƒí’ˆ ëª©ë¡ì„ ë„˜ê²¨ì£¼ì—ˆë‹¤.

```tsx
// src/pages/ProductListPage.tsx
import Products from '../components/product-list/Products';

import useFetchProducts from '../hooks/useFetchProducts';

export default function ProductListPage() {
  const { products } = useFetchProducts();

  return (
    <div>
      <h2>Products</h2>
      <Products products={products} />
    </div>
  );
}
```
## ğŸ‹ 1. ìƒí’ˆ ëª©ë¡ ë°›ì•„ì˜¤ê¸° - useFetchProducts

productsê°€ undefinedê°€ ë˜ì§€ ì•Šê²Œ dataê°€ ì—†ì„ ë•Œ ë¹ˆ ë°°ì—´ì´ ì¶œë ¥ë˜ê²Œ í•œë‹¤.

í•„ìš”ì— ë”°ë¼ `useFetch` ì—ì„œ errorë‚˜ loading ìƒíƒœë¥¼ ì¶”ê°€ë¡œ ë°›ì•„ì˜¬ ìˆ˜ ìˆë‹¤.

```ts
// src/hooks/useFetchProducts.ts
import { useFetch } from 'usehooks-ts';

import { ProductSummary } from '../types';

// TODO : í™˜ê²½ë³€ìˆ˜ë¡œ ë¹¼ê¸°
const apiBaseUrl = 'https://shop-demo-api-01.fly.dev';

export default function useFetchProducts() {
  type Data = {
    products: ProductSummary[];
  };

  const { data } = useFetch<Data>(`${apiBaseUrl}/products`);

  return {
    products: data?.products ?? [],
  };
```

## ğŸ‹ 2. ìƒí’ˆ ëª©ë¡ ë³´ì—¬ì£¼ê¸° - Products ì»´í¬ë„ŒíŠ¸

ì²˜ìŒì—ëŠ” ë°ì´í„°ë¥¼ ì˜ ë°›ì•„ì™”ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ë¬¸ìì—´ë¡œ ë„ì›Œë³¸ë‹¤.

```tsx
// src/components/product-list/Products.tsx
import { ProductSummary } from '../../types';

interface ProductProps{
    products: ProductSummary[];
}

export default function Products({ products }: ProductProps) {
  return (
    <div>
      {products.map((product) => (
        <p key={product.id}>
          {JSON.stringify(product)}
        </p>
      ))}
    </div>
  );
}
```

ì˜ ë‚˜ì˜¨ë‹¤ë©´ í™”ë©´ êµ¬ì„±ì„ ì‹œì‘í•œë‹¤.

- ìˆœì„œê°€ ì—†ëŠ” ë¦¬ìŠ¤íŠ¸ë‹ˆê¹Œ `ul`ì„ ì‚¬ìš©í•œë‹¤.
- ìŠ¤íƒ€ì¼ì„ ì ìš©í•œë‹¤. (styled-components)
- ìì„¸í•œ ì •ë³´ëŠ” ì»´í¬ë„ŒíŠ¸ `Product` ì— ìœ„ì„í•œë‹¤.
  
```tsx
// src/components/product-list/Products.tsx
import { Link } from 'react-router-dom';
import styled from 'styled-components';

import { ProductSummary } from '../../types';

import Product from './Product';

const Container = styled.div`
  ul {
    display: flex;
    flex-wrap: wrap;
  }

  li {
    width: 20%;
    padding: 1rem;
  }

  a {
    display: block;
  }
`;

type ProductsProps = {
  products: ProductSummary[];
}

export default function Products({ products }: ProductsProps) {
  if (!products.length) {
    return null;
  }

  return (
    <Container>
      <ul>
        {products.map((product) => (
          <li key={product.id}>
            <Link to={`/products/${product.id}`}>
              <Product product={product} />
            </Link>
          </li>
        ))}
      </ul>
    </Container>
  );
}
```
Product ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ ë•Œë„ ì²˜ìŒì—ëŠ” ë°ì´í„°ê°€ ì˜ ì „ë‹¬ ë˜ëŠ”ì§€ í™•ì¸í•œë‹¤.

```tsx
// src/components/product-list/Product.tsx
import { ProductSummary } from '../../types';

interface ProductProps{
    product: ProductSummary;
  }

export default function Product({ product } : ProductProps) {
  return (
    <p>{JSON.stringify(product)}</p>
  );
}
```

ì˜ ë°›ì•„ì˜¤ëŠ”ì§€ í–ˆë‹¤ë©´ í™”ë©´ì„ êµ¬ì„±í•œë‹¤. 

```tsx
// src/components/product-list/Product.tsx
import styled from 'styled-components';

import { ProductSummary } from '../../types';

const Thumbnail = styled.img.attrs({
  alt: 'Thumbnail',
})`
  display: block;
  width: 100%;
  aspect-ratio: 1/1;
`;

type ProductProps = {
  product: ProductSummary;
}

export default function Product({ product }: ProductProps) {
  return (
    <div>
      <Thumbnail src={product.thumbnail.url} />
      <div>{product.name}</div>
      <div>
        {numberFormat(product.price)}
        ì›
      </div>
    </div>
  );
}
```
### ğŸ³ alt

ì´ë¯¸ì§€ì— ëŒ€í•œ ìŠ¤íƒ€ì¼ ì ìš©ì„ ìœ„í•´ì„œ ìŠ¤íƒ€ì¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬í•´ì¤¬ë‹¤.

ìŠ¤í¬ë¦° ë¦¬ë”ê°€ ì´ë¯¸ì§€ë¥¼ ì½ëŠ”ë° altê°€ ìƒí™©ì— ë”°ë¼ ë°©í•´ê°€ ë  ë•Œê°€ ë  ìˆ˜ë„ ìˆë‹¤. ë”°ë¼ì„œ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ëŠ” ìœ ì €ê°€ ì–´ë–¤ ê²ƒì„ ë” ì„ í˜¸í•˜ëŠ”ì§€ì— ë”°ë¼ altë¥¼ ì–´ë–»ê²Œ í• ì§€ ì •í•´ì•¼ í•œë‹¤.


### ğŸ³ numberFormat

[Intl.NumberFormat
](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat)

`Intl.NumberFormat`ì€ ì–¸ì–´ì— ë§ëŠ” ìˆ«ì ì„œì‹ì„ ì§€ì›í•˜ëŠ” ê°ì²´ì˜ ìƒì„±ìì´ë‹¤. êµ­ê°€ë§ˆë‹¤ ì»´ë§ˆ ì°ëŠ” ê²Œ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì‚¬ìš©í–ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, 12345679ê°€ ì˜ì–´ê¶Œìœ¼ë¡œëŠ” 12,345,679ìœ¼ë¡œ ë…ì¼ê¶Œìœ¼ë¡œëŠ” 123.456,79ìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤.

íŠ¹ì • ë‚˜ë¼ì˜ í†µí™”ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ìœ¼ë©´ ê´„í˜¸ ì•ˆì— ì¸ìë¡œ ì˜µì…˜ì„ ì¤„ ìˆ˜ ìˆë‹¤.

```ts
// /src/utils/numberFormat.ts
export default function numberFormat(value: number) {
  return new Intl.NumberFormat().format(value);
}
```

### ğŸ³ Text

í•œì •ëœ ê³µê°„ ì•ˆì—ì„œ í…ìŠ¤íŠ¸ë¥¼ í‘œì‹œí•  ë•Œ, ì¤„ ë„ì›€ì„ ê¸€ì ë‹¨ìœ„ë¡œ í• ì§€ ì•„ë‹ˆë©´ ë‹¨ì–´ ë‹¨ìœ„ë¡œ í• ì§€ ë“±ì„ ì„ íƒí•´ì•¼ í•œë‹¤. ì‚¬ìš©ìê°€ ì–´ë–¤ í™˜ê²½ì—ì„œ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í• ì§€ ëª¨ë¥´ê¸° ë•Œë¬¸ì— ê¸€ìê°€ ë„˜ì¹˜ë©´ `...` ì„ ë„£ëŠ” ì²˜ë¦¬ ê°™ì€ ê²Œ í•„ìš”í•˜ë‹¤.

## ğŸ‹ ìƒí’ˆ ëª©ë¡ì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²• - Store

ìƒí’ˆ ëª©ë¡ì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ê°€ì§€ê°€ ìˆëŠ”ë°, ìš°ë¦¬ëŠ” Storeë¥¼ ì‚¬ìš©í•œë‹¤. ì§€ê¸ˆì€ í° ì˜ë¯¸ê°€ ì—†ì§€ë§Œ, ìƒí’ˆ ëª©ë¡ì„ Storeë¥¼ í†µí•´ ë°›ì•„ì˜¤ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.

ì´ëŠ” `useFetchProducts` ì—ì„œ í™œìš©í•œë‹¤.

```ts
// src/stores/ProductsStore.ts
import axios from 'axios';

import { singleton } from 'tsyringe';
import { Action, Store } from 'usestore-ts';

import { ProductSummary } from '../types';

// TODO : í™˜ê²½ë³€ìˆ˜ë¡œ ë¹¼ê¸°
const apiBaseUrl = 'https://shop-demo-api-01.fly.dev';

@singleton()
@Store()
export default class ProductsStore {
  products: ProductSummary[] = [];

  async fetchProducts() {
    this.setProducts([]);

    const { data } = await axios.get(`${apiBaseUrl}/products`);
    const { products } = data;

    this.setProducts(products);
  }

  @Action()
  setProducts(products: ProductSummary[]) {
    this.products = products;
  }
}
```

ì´ì œ `useFetchProducts` ì—ì„œ useFetchê°€ ì•„ë‹Œ Storeë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ë„ë¡ ë³€ê²½í•œë‹¤. `useFetchProducts` í›…ì´ `apiBaseUrl` ê·¸ë¦¬ê³  `API ì„œë²„ê°€ ì–´ë””ì— ìˆëŠ” ì§€` ë“±ì— ì•Œ í•„ìš”ê°€ ì—†ì–´ì§€ê²Œ ìœ„ì„ì´ ëœ ê²ƒì´ë‹¤.

```tsx
// /src/hooks/useFetchProducts.ts
import { container } from 'tsyringe';

import { useEffectOnce } from 'usehooks-ts';

import { useStore } from 'usestore-ts';

import ProductsStore from '../stores/ProductsStore';

export default function useFetchProducts() {
  const store = container.resolve(ProductsStore);

  const [{ products }] = useStore(store);

  useEffectOnce(() => {
    store.fetchProducts();
  });

  // type Data = {
  //     products: ProductSummary[];
  // };

  // const { data } = useFetch<Data>(`${apiBaseUrl}/products`);

  //     return {
  //       products: data?.products ?? [],
  //     };

  return {
    products,
  };
}
```

## ğŸ‹ ì¡°ì–¸

> `ì•„ìƒ¬`
> ì´ê²ƒì €ê²ƒ ë§Œë“¤ë‹¤ë³´ë©´ í´ë” êµ¬ì¡°ê°€ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ ë³¸ì¸ì´ ì»¨íŠ¸ë¡¤ í•  ìˆ˜ ìˆë‹¤ë©´ ìƒê´€ ì—†ë‹¤. ì»´í¬ë„ŒíŠ¸ë„ ë§ˆì°¬ê°€ì§€ë¡œ ê¸¸ì–´ì ¸ì„œ êµ¬ì¡°ë¥¼ ì•Œì•„ë³´ê¸° í˜ë“¤ë‹¤ë©´ ì»¨íŠ¸ë¡¤ í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ì—ì„œ ë¶„ë¦¬í•œë‹¤.

> `ì•„ìƒ¬`
> `import` ë¥¼ ìë™ìœ¼ë¡œ í•˜ë‹¤ë³´ë©´ ìœ„ì— ë§‰ ìŒ“ì´ê²Œ ëœë‹¤. ê³„ì†í•´ì„œ ì •ë¦¬ë¥¼ í•˜ë©´ ë‚˜ì¤‘ì— í—¤ë©”ëŠ” ì¼ì´ ì¤„ì–´ë“ ë‹¤. ì•„ìƒ¬ì€ `component > hook > type > utils` ìˆœìœ¼ë¡œ ì“°ëŠ” í¸ì´ë‹¤.